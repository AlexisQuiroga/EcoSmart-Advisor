{% extends "layout.html" %}

{% block title %}Inicio{% endblock %}

{% block content %}
<div class="row align-items-center mb-5">
    <div class="col-lg-6">
        <h1 class="display-4 fw-bold text-success">Asesoramiento Inteligente en Energías Renovables</h1>
        <p class="lead">EcoSmart Advisor te ayuda a elegir el sistema de energía renovable perfecto para tu hogar o negocio con análisis personalizados basados en IA.</p>
        <div class="mt-4">
            <a href="{{ url_for('diagnostico.diagnostico') }}" class="btn btn-success btn-lg me-2">
                <i class="fas fa-solar-panel me-2"></i>Comenzar Diagnóstico
            </a>
            <a href="{{ url_for('simulador.simulador') }}" class="btn btn-outline-success btn-lg">
                <i class="fas fa-calculator me-2"></i>Usar Simulador
            </a>
        </div>
    </div>


    
    <div class="col-lg-6 mt-4 mt-lg-0 p-0">
        <!-- Carrusel con todas las imágenes y el video (reconstruido completamente) -->
        <div id="carouselEnergiasRenovables" class="carousel slide" data-bs-ride="true">
            <!-- Indicadores -->
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide-to="0" class="active" aria-current="true"></button>
                <button type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide-to="2"></button>
                <button type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide-to="3"></button>
                <button type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide-to="4"></button>
                <button type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide-to="5"></button>
                <button type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide-to="6"></button>
            </div>
            
            <!-- Items del carrusel -->
            <div class="carousel-inner">
                <!-- Diapositiva 1: Generador Eólico sin overlay -->
                <div class="carousel-item active">
                    <div class="position-relative">
                        <img src="{{ url_for('static', filename='images/carousel/generador-de-energia-de-turbina-de-viento-con-cielo-azul.jpg') }}" class="d-block w-100" alt="Generador Eólico">
                        <div class="position-absolute bottom-0 start-0 bg-success bg-opacity-75 text-white p-3 m-3 rounded" style="max-width: 300px;">
                            <h5 class="fs-6 fw-bold mb-1">Energía Eólica - El Futuro</h5>
                            <p class="mb-0 small">La energía eólica es 100% renovable y no produce emisiones de gases de efecto invernadero.</p>
                            <p class="mb-0 small mt-2">España está entre los 5 países con mayor potencia eólica instalada a nivel mundial.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Diapositiva 2: Imagen de Generador Eólico con overlay para tapar marca de agua -->
                <div class="carousel-item">
                    <div class="position-relative">
                        <img src="{{ url_for('static', filename='images/carousel/generador eolico.jpg') }}" class="d-block w-100" alt="Aerogenerador Eólico">
                        <div class="position-absolute bottom-0 end-0 bg-success bg-opacity-75 text-white p-3 m-3 rounded" style="max-width: 300px;">
                            <h5 class="fs-6 fw-bold mb-1">Datos de Energía Eólica</h5>
                            <p class="mb-0 small">Un aerogenerador de 2MW puede abastecer a más de 1,500 hogares por año.</p>
                            <p class="mb-0 small mt-2">Retorno energético de 20-25 veces la energía usada en fabricación.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Diapositiva 3: Video de Generador Eólico con overlay central -->
                <div class="carousel-item">
                    <div class="position-relative">
                        <video autoplay loop muted playsinline class="d-block w-100">
                            <source src="{{ url_for('static', filename='images/carousel/video generador eolico.mp4') }}" type="video/mp4">
                            Tu navegador no soporta videos HTML5.
                        </video>
                        <div class="position-absolute top-50 start-50 translate-middle bg-success bg-opacity-75 text-white p-3 rounded" style="max-width: 350px;">
                            <h5 class="fs-6 fw-bold mb-1">Funcionamiento del Aerogenerador</h5>
                            <p class="mb-0 small">Los aerogeneradores modernos generan electricidad cuando el viento mueve las palas a velocidades de 3-25 m/s.</p>
                            <p class="mb-0 small mt-2">Una sola turbina puede reducir hasta 1.500 toneladas de CO2 al año.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Diapositiva 4: Paneles Solares Vista Aérea -->
                <div class="carousel-item">
                    <div class="position-relative">
                        <img src="{{ url_for('static', filename='images/carousel/vista aerea paneles solares.jpg') }}" class="d-block w-100" alt="Paneles Solares Vista Aérea">
                        <div class="position-absolute top-0 end-0 bg-primary bg-opacity-75 text-white p-3 m-3 rounded" style="max-width: 300px;">
                            <h5 class="fs-6 fw-bold mb-1">Parques Solares</h5>
                            <p class="mb-0 small">Los parques solares a gran escala pueden generar suficiente energía para abastecer a miles de hogares.</p>
                            <p class="mb-0 small mt-2">Cada MW instalado evita la emisión de aproximadamente 665 toneladas de CO2 al año.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Diapositiva 5: Instalación de Paneles -->
                <div class="carousel-item">
                    <div class="position-relative">
                        <img src="{{ url_for('static', filename='images/carousel/vista hombre colocando panel solar.jpg') }}" class="d-block w-100" alt="Instalación de Paneles Solares">
                        <div class="position-absolute bottom-0 start-0 bg-primary bg-opacity-75 text-white p-3 m-3 rounded" style="max-width: 300px;">
                            <h5 class="fs-6 fw-bold mb-1">Instalación Fotovoltaica</h5>
                            <p class="mb-0 small">La instalación de paneles solares en un hogar promedio puede amortizarse en 5-8 años.</p>
                            <p class="mb-0 small mt-2">Los paneles modernos tienen una vida útil de más de 25 años con poco mantenimiento.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Diapositiva 6: Energía Solar Térmica -->
                <div class="carousel-item">
                    <div class="position-relative">
                        <img src="{{ url_for('static', filename='images/carousel/energia-solar-termica.jpg') }}" class="d-block w-100" alt="Energía Solar Térmica">
                        <div class="position-absolute top-0 start-0 bg-primary bg-opacity-75 text-white p-3 m-3 rounded" style="max-width: 300px;">
                            <h5 class="fs-6 fw-bold mb-1">Energía Solar Térmica</h5>
                            <p class="mb-0 small">Los sistemas solares térmicos pueden cubrir hasta el 70% de la necesidad anual de agua caliente en un hogar.</p>
                            <p class="mb-0 small mt-2">Por cada m² de captador solar térmico se evita la emisión de una tonelada de CO2 al año.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Diapositiva 7: Planta de Energía Alternativa -->
                <div class="carousel-item">
                    <div class="position-relative">
                        <img src="{{ url_for('static', filename='images/carousel/persona-cerca-de-la-planta-de-energia-alternativa.jpg') }}" class="d-block w-100" alt="Planta de Energía Alternativa">
                        <div class="position-absolute bottom-0 end-0 bg-info bg-opacity-75 text-white p-3 m-3 rounded" style="max-width: 300px;">
                            <h5 class="fs-6 fw-bold mb-1">Futuro Energético</h5>
                            <p class="mb-0 small">Las energías renovables crean 3 veces más empleos que los combustibles fósiles por unidad de inversión.</p>
                            <p class="mb-0 small mt-2">Se espera que para 2050, más del 85% de la electricidad mundial provenga de fuentes renovables.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Controles del carrusel -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Anterior</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselEnergiasRenovables" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Siguiente</span>
            </button>
        </div>
    </div>


    
<section class="py-5 bg-white rounded-3 shadow-sm mb-5">
    <div class="container">
        <h2 class="text-center mb-4">Nuestras Herramientas</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-search-location fa-3x text-success"></i>
                        </div>
                        <h3 class="h5">Diagnóstico Inteligente</h3>
                        <p class="text-muted">Analiza tu ubicación, consumo y preferencias para recomendarte el sistema de energía renovable ideal.</p>
                        <a href="{{ url_for('diagnostico.diagnostico') }}" class="btn btn-outline-success btn-sm">Iniciar Diagnóstico</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-chart-line fa-3x text-primary"></i>
                        </div>
                        <h3 class="h5">Simulador Avanzado</h3>
                        <p class="text-muted">Simula diferentes escenarios y configuraciones para visualizar rendimiento y retorno de inversión.</p>
                        <a href="{{ url_for('simulador.simulador') }}" class="btn btn-outline-primary btn-sm">Probar Simulador</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-robot fa-3x text-info"></i>
                        </div>
                        <h3 class="h5">Chatbot Educativo</h3>
                        <p class="text-muted">Resuelve tus dudas sobre energías renovables con nuestro asistente virtual basado en IA.</p>
                        <button id="activarChatbot" class="btn btn-outline-info btn-sm">Hacer Preguntas</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="mb-5">
    <h2 class="text-center mb-4">¿Por qué elegir energías renovables?</h2>
    <div class="row g-4">
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 border-0 bg-success bg-opacity-10">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-wallet text-success fa-2x me-3"></i>
                        <h3 class="h5 mb-0">Ahorro económico</h3>
                    </div>
                    <p class="mb-0">Reduce tu factura energética hasta un 70% y obtén retorno de inversión en 4-8 años.</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 border-0 bg-primary bg-opacity-10">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-tree text-primary fa-2x me-3"></i>
                        <h3 class="h5 mb-0">Impacto ambiental</h3>
                    </div>
                    <p class="mb-0">Reduce tu huella de carbono equivalente a plantar cientos de árboles cada año.</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 border-0 bg-warning bg-opacity-10">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-plug text-warning fa-2x me-3"></i>
                        <h3 class="h5 mb-0">Independencia</h3>
                    </div>
                    <p class="mb-0">Genera tu propia energía y reduce tu dependencia de la red eléctrica y combustibles fósiles.</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 border-0 bg-info bg-opacity-10">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-home text-info fa-2x me-3"></i>
                        <h3 class="h5 mb-0">Valor inmobiliario</h3>
                    </div>
                    <p class="mb-0">Aumenta el valor de tu propiedad con instalaciones modernas de energía renovable.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="bg-light p-5 rounded-3 shadow-sm mb-5">
    <div class="text-center mb-4">
        <h2>¿Listo para comenzar?</h2>
        <p class="lead">Obtén tu diagnóstico personalizado en menos de 5 minutos</p>
    </div>
    <div class="d-flex justify-content-center">
        <a href="{{ url_for('diagnostico.diagnostico') }}" class="btn btn-success btn-lg px-5">
            <i class="fas fa-lightbulb me-2"></i>Comenzar Ahora
        </a>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Función para inicializar el carrusel
    function initCarousel() {
        var carouselElement = document.getElementById('carouselEnergiasRenovables');
        
        if (!carouselElement) {
            console.error('No se encontró el elemento del carrusel');
            return;
        }
        
        // Destruir cualquier instancia previa para evitar conflictos
        var carouselInstance = bootstrap.Carousel.getInstance(carouselElement);
        if (carouselInstance) {
            carouselInstance.dispose();
        }
        
        // Crear nueva instancia con configuración óptima
        var carousel = new bootstrap.Carousel(carouselElement, {
            interval: 10000,       // Intervalo entre diapositivas (10 segundos)
            pause: false,          // No pausar al hover (puede causar problemas)
            wrap: true,            // Ciclo continuo
            touch: true,           // Soporte para touch
            keyboard: true,        // Soporte para teclado
            ride: true             // Iniciar automáticamente al cargar
        });
        
        console.log('Carrusel inicializado correctamente');
        
        // Detector para cambios de diapositiva
        carouselElement.addEventListener('slide.bs.carousel', function(e) {
            console.log('Cambiando a diapositiva: ' + e.to);
        });
        
        // Forzar transición a la primera diapositiva para activar el carrusel
        setTimeout(function() {
            carousel.to(0);
        }, 500);
    }
    
    // Inicializar cuando el DOM esté completamente cargado
    document.addEventListener('DOMContentLoaded', function() {
        initCarousel();
        
        // También inicializar cuando la ventana esté completamente cargada
        window.addEventListener('load', function() {
            initCarousel();
        });
        
        // Evento para activar el chatbot desde el botón de la sección de herramientas
        var botonActivarChatbot = document.getElementById('activarChatbot');
        if (botonActivarChatbot) {
            botonActivarChatbot.addEventListener('click', function() {
                // Mostrar el chatbot flotante
                var chatbotElement = document.getElementById('floatingChat');
                if (chatbotElement) {
                    chatbotElement.classList.add('show-chat');  // Usamos la clase correcta 'show-chat'
                    // Dar el foco al input del chat
                    var inputChatElement = document.getElementById('floatingChatInput');
                    if (inputChatElement) {
                        inputChatElement.focus();
                    }
                }
            });
        }
    });
</script>
{% endblock %}